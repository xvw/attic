<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Zed_char (zed.Zed_char)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../index.html">zed</a> &#x00BB; Zed_char</nav><header class="odoc-preamble"><h1>Module <code><span>Zed_char</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>The type for glyphs.</p><p>To represent a grapheme in unicode is a bit more complicated than what is expected: a printable UChar. For example, diacritics are added to IPA(international phonetic alphabet) letter to produce a modified pronunciation. Variation selectors are added to a CJK character to specify a specific glyph variant for the character.</p><p>Therefore the logical type definition of <code>Zed_char.t</code> can be seen as</p><pre><code>type Zed_char.t= {
  core: UChar.t;
  combined: UChar.t list;
}</code></pre></div></div><div class="odoc-spec"><div class="spec type" id="type-char_prop" class="anchored"><a href="#type-char_prop" class="anchor"></a><code><span><span class="keyword">type</span> char_prop</span><span> = </span></code><table><tr id="type-char_prop.Printable" class="anchored"><td class="def variant constructor"><a href="#type-char_prop.Printable" class="anchor"></a><code><span>| </span><span><span class="constructor">Printable</span> <span class="keyword">of</span> int</span></code></td></tr><tr id="type-char_prop.Other" class="anchored"><td class="def variant constructor"><a href="#type-char_prop.Other" class="anchor"></a><code><span>| </span><span><span class="constructor">Other</span></span></code></td></tr><tr id="type-char_prop.Null" class="anchored"><td class="def variant constructor"><a href="#type-char_prop.Null" class="anchor"></a><code><span>| </span><span><span class="constructor">Null</span></span></code></td></tr></table></div></div><p>The property of a character. It can be either <code>Printable of width</code>, <code>Other</code>(unprintable character) or <code>Null</code>(code 0).</p><div class="odoc-spec"><div class="spec value" id="val-to_raw" class="anchored"><a href="#val-to_raw" class="anchor"></a><code><span><span class="keyword">val</span> to_raw : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../camomile/CamomileLibrary/UChar/index.html#type-t">CamomileLibrary.UChar.t</a> list</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-to_array" class="anchored"><a href="#val-to_array" class="anchor"></a><code><span><span class="keyword">val</span> to_array : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../camomile/CamomileLibrary/UChar/index.html#type-t">CamomileLibrary.UChar.t</a> array</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-core" class="anchored"><a href="#val-core" class="anchor"></a><code><span><span class="keyword">val</span> core : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../camomile/CamomileLibrary/UChar/index.html#type-t">CamomileLibrary.UChar.t</a></span></code></div><div class="spec-doc"><p><code>core char</code> returns the core of the <code>char</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-combined" class="anchored"><a href="#val-combined" class="anchor"></a><code><span><span class="keyword">val</span> combined : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../camomile/CamomileLibrary/UChar/index.html#type-t">CamomileLibrary.UChar.t</a> list</span></span></code></div><div class="spec-doc"><p><code>combined char</code> returns the combining marks of the <code>char</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-unsafe_of_utf8" class="anchored"><a href="#val-unsafe_of_utf8" class="anchor"></a><code><span><span class="keyword">val</span> unsafe_of_utf8 : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>unsafe_of_utf8 str</code> returns a <code>zed_char</code> from utf8 encoded <code>str</code> without any validation.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-of_utf8" class="anchored"><a href="#val-of_utf8" class="anchor"></a><code><span><span class="keyword">val</span> of_utf8 : <span>?indv_combining:bool <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>of_utf8 str</code> returns a <code>zed_char</code> from utf8 encoded <code>str</code>. This function checks whether <code>str</code> represents a single <code>UChar</code> or a legal grapheme, i.e. a printable core with optional combining marks. It will raise <code>Failure &quot;malformed Zed_char sequence&quot;</code> If the validation is not passed.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">indv_combining</span> <p>allow to create a <code>Zed_char.t</code> from a single combining mark, default to <code>true</code></p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-to_utf8" class="anchored"><a href="#val-to_utf8" class="anchor"></a><code><span><span class="keyword">val</span> to_utf8 : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>to_utf8 chr</code> converts a <code>chr</code> to a string encoded in UTF-8.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-zero" class="anchored"><a href="#val-zero" class="anchor"></a><code><span><span class="keyword">val</span> zero : <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>The Character 0.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-prop_uChar" class="anchored"><a href="#val-prop_uChar" class="anchor"></a><code><span><span class="keyword">val</span> prop_uChar : <span><a href="../../camomile/CamomileLibrary/UChar/index.html#type-t">CamomileLibrary.UChar.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-char_prop">char_prop</a></span></code></div><div class="spec-doc"><p><code>prop_uChar uChar</code> returns the char_prop of <code>uChar</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-prop" class="anchored"><a href="#val-prop" class="anchor"></a><code><span><span class="keyword">val</span> prop : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-char_prop">char_prop</a></span></code></div><div class="spec-doc"><p><code>prop ch</code> returns the char_prop of <code>ch</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-is_printable" class="anchored"><a href="#val-is_printable" class="anchor"></a><code><span><span class="keyword">val</span> is_printable : <span><a href="../../camomile/CamomileLibrary/UChar/index.html#type-t">CamomileLibrary.UChar.t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Returns whether a <code>UChar.t</code> is a printable character or not.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-is_printable_core" class="anchored"><a href="#val-is_printable_core" class="anchor"></a><code><span><span class="keyword">val</span> is_printable_core : <span><a href="../../camomile/CamomileLibrary/UChar/index.html#type-t">CamomileLibrary.UChar.t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Returns whether a <code>UChar.t</code> is a printable character and its width is not zero.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-is_combining_mark" class="anchored"><a href="#val-is_combining_mark" class="anchor"></a><code><span><span class="keyword">val</span> is_combining_mark : <span><a href="../../camomile/CamomileLibrary/UChar/index.html#type-t">CamomileLibrary.UChar.t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Returns whether a <code>UChar.t</code> is a combining mark.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-size" class="anchored"><a href="#val-size" class="anchor"></a><code><span><span class="keyword">val</span> size : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>size ch</code> returns the size (number of characters) of <code>ch</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-length" class="anchored"><a href="#val-length" class="anchor"></a><code><span><span class="keyword">val</span> length : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Aliase of size</p></div></div><div class="odoc-spec"><div class="spec value" id="val-width" class="anchored"><a href="#val-width" class="anchor"></a><code><span><span class="keyword">val</span> width : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>width ch</code> returns the width of <code>ch</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-out_of_range" class="anchored"><a href="#val-out_of_range" class="anchor"></a><code><span><span class="keyword">val</span> out_of_range : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>out_of_range ch idx</code> returns whether <code>idx</code> is out of range of <code>ch</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-get" class="anchored"><a href="#val-get" class="anchor"></a><code><span><span class="keyword">val</span> get : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <a href="../../camomile/CamomileLibrary/UChar/index.html#type-t">CamomileLibrary.UChar.t</a></span></code></div><div class="spec-doc"><p><code>get ch n</code> returns the <code>n</code>-th character of <code>ch</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-get_opt" class="anchored"><a href="#val-get_opt" class="anchor"></a><code><span><span class="keyword">val</span> get_opt : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="../../camomile/CamomileLibrary/UChar/index.html#type-t">CamomileLibrary.UChar.t</a> option</span></span></code></div><div class="spec-doc"><p><code>get ch n</code> returns an optional value of the <code>n</code>-th character of <code>ch</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-append" class="anchored"><a href="#val-append" class="anchor"></a><code><span><span class="keyword">val</span> append : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../camomile/CamomileLibrary/UChar/index.html#type-t">CamomileLibrary.UChar.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>append ch cm</code> append the combining mark <code>cm</code> to ch and returns it. If <code>cm</code> is not a combining mark, then the original <code>ch</code> is returned.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-compare_core" class="anchored"><a href="#val-compare_core" class="anchor"></a><code><span><span class="keyword">val</span> compare_core : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>compare_core ch1 ch2</code> compares the core components of ch1 and ch2</p></div></div><div class="odoc-spec"><div class="spec value" id="val-compare_raw" class="anchored"><a href="#val-compare_raw" class="anchor"></a><code><span><span class="keyword">val</span> compare_raw : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>compare_raw ch1 ch2</code> compares over the internal characters of ch1 and ch2 sequentially</p></div></div><div class="odoc-spec"><div class="spec value" id="val-compare" class="anchored"><a href="#val-compare" class="anchor"></a><code><span><span class="keyword">val</span> compare : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Alias of compare_raw</p></div></div><div class="odoc-spec"><div class="spec value" id="val-mix_uChar" class="anchored"><a href="#val-mix_uChar" class="anchor"></a><code><span><span class="keyword">val</span> mix_uChar : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../camomile/CamomileLibrary/UChar/index.html#type-t">CamomileLibrary.UChar.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="#type-t">t</a>, <a href="#type-t">t</a>)</span> <a href="../../result/Result/index.html#type-result">Result.result</a></span></span></code></div><div class="spec-doc"><p><code>mix_uChar chr uChar</code> tries to append <code>uChar</code> to <code>chr</code> and returns <code>Ok result</code>. If <code>uChar</code> is not a combining mark, then an <code>Error (Zed_char.t consists of uChar)</code> is returned.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-of_uChars" class="anchored"><a href="#val-of_uChars" class="anchor"></a><code><span><span class="keyword">val</span> of_uChars : <span>?trim:bool <span class="arrow">&#45;&gt;</span></span> <span>?indv_combining:bool <span class="arrow">&#45;&gt;</span></span> <span><span><a href="../../camomile/CamomileLibrary/UChar/index.html#type-t">CamomileLibrary.UChar.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> option</span> * <span><a href="../../camomile/CamomileLibrary/UChar/index.html#type-t">CamomileLibrary.UChar.t</a> list</span></span></code></div><div class="spec-doc"><p><code>of_uChars uChars</code> transforms <code>uChars</code> to a tuple. The first value is an optional <code>Zed_char.t</code> and the second is a list of remaining uChars. The optional <code>Zed_char.t</code> is either a legal grapheme(a core printable char with optinal combining marks) or a wrap for an arbitrary UChar.t. After that, all remaining uChars returned as the second value in the tuple.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">trim</span> <p>trim leading combining marks before transforming, default to <code>false</code></p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">indv_combining</span> <p>create a <code>Zed_char</code> from an individual dissociated combining mark, default to <code>true</code></p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-zChars_of_uChars" class="anchored"><a href="#val-zChars_of_uChars" class="anchor"></a><code><span><span class="keyword">val</span> zChars_of_uChars : <span>?trim:bool <span class="arrow">&#45;&gt;</span></span> <span>?indv_combining:bool <span class="arrow">&#45;&gt;</span></span> <span><span><a href="../../camomile/CamomileLibrary/UChar/index.html#type-t">CamomileLibrary.UChar.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> list</span> * <span><a href="../../camomile/CamomileLibrary/UChar/index.html#type-t">CamomileLibrary.UChar.t</a> list</span></span></code></div><div class="spec-doc"><p><code>zChars of_uChars uChars</code> transforms <code>uChars</code> to a tuple. The first value is a list of <code>Zed_char.t</code> and the second is a list of remaining uChars.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">trim</span> <p>trim leading combining marks before transforming, default to <code>false</code></p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">indv_combining</span> <p>create a <code>Zed_char</code> from an individual dissociated combining mark, default to <code>true</code></p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-for_all" class="anchored"><a href="#val-for_all" class="anchor"></a><code><span><span class="keyword">val</span> for_all : <span><span>(<span><a href="../../camomile/CamomileLibrary/UChar/index.html#type-t">CamomileLibrary.UChar.t</a> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>for_all p zChar</code> checks if all elements of <code>zChar</code> satisfy the predicate <code>p</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-iter" class="anchored"><a href="#val-iter" class="anchor"></a><code><span><span class="keyword">val</span> iter : <span><span>(<span><a href="../../camomile/CamomileLibrary/UChar/index.html#type-t">CamomileLibrary.UChar.t</a> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>iter f char</code> applies <code>f</code> on all characters of <code>char</code>.</p></div></div><p>The prefix 'unsafe_' of <code>unsafe_of_char</code> and <code>unsafe_of_uChar</code> means the two functions do not check if <code>char</code> or <code>uChar</code> being transformed is a valid grapheme. There is no 'safe_' version, because the scenario we should deal with a single <code>char</code> or <code>uChar</code> is when the char sequence are individual, incomplete. For example, when we are reading user input. Even if a user wants to input a legal grapheme, say, 'a' with a hat(a combining mark) on top. the user will input 'a' and then '^' individually, the later combining mark is always illegal. What we should do is to invoke <code>unsafe_of_uChar user_input</code> and send the result to the edit engine. Other modules in zed, like Zed_string, Zed_lines, Zed_edit ... are already well designed to deal with such a situation. They will do combining mark joining, grapheme validation for you automatically. Use the two 'unsafe_' functions directly, you're doing things the right way.</p><div class="odoc-spec"><div class="spec value" id="val-unsafe_of_char" class="anchored"><a href="#val-unsafe_of_char" class="anchor"></a><code><span><span class="keyword">val</span> unsafe_of_char : <span>char <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>unsafe_of_char ch</code> returns a <code>Zed_char</code> whose core is <code>ch</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-unsafe_of_uChar" class="anchored"><a href="#val-unsafe_of_uChar" class="anchor"></a><code><span><span class="keyword">val</span> unsafe_of_uChar : <span><a href="../../camomile/CamomileLibrary/UChar/index.html#type-t">CamomileLibrary.UChar.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>unsafe_of_uChar ch</code> returns a <code>Zed_char</code> whose core is <code>ch</code>.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-US" class="anchored"><a href="#module-US" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="US/index.html">US</a></span><span> (<a href="US/argument-1-US/index.html">US</a> : <a href="../../camomile/CamomileLibrary/UnicodeString/module-type-Type/index.html">CamomileLibrary.UnicodeString.Type</a>) : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Converting between <code>UnicodeString.Type</code> and <code>Zed_char.t</code></p></div></div></div></body></html>