<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>LTerm (lambda-term.LTerm)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../index.html">lambda-term</a> &#x00BB; LTerm</nav><header class="odoc-preamble"><h1>Module <code><span>LTerm</span></code></h1><p>Terminal definitions</p></header><nav class="odoc-toc"><ul><li><a href="#creation">Creation</a></li><li><a href="#informations">Informations</a></li><li><a href="#modes">Modes</a></li><li><a href="#cursor">Cursor</a></li><li><a href="#erasing-text">Erasing text</a></li><li><a href="#state">State</a></li><li><a href="#events">Events</a></li><li><a href="#printing">Printing</a></li><li><a href="#printing-contexts">Printing contexts</a></li><li><a href="#styles">Styles</a></li><li><a href="#rendering">Rendering</a></li><li><a href="#misc">Misc</a></li><li><a href="#well-known-instances">Well known instances</a></li><li><a href="#low-level-functions">Low-level functions</a></li><li><a href="#modification">Modification</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>Type of terminals.</p></div></div><h6 id="creation"><a href="#creation" class="anchor"></a>Creation</h6><div class="odoc-spec"><div class="spec exception" id="exception-No_such_encoding" class="anchored"><a href="#exception-No_such_encoding" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">No_such_encoding</span> <span class="keyword">of</span> string</span></code></div><div class="spec-doc"><p>Exception raised when an encoding does not exist.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-create" class="anchored"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : <span>?windows:bool <span class="arrow">&#45;&gt;</span></span> <span>?model:string <span class="arrow">&#45;&gt;</span></span> <span>?incoming_encoding:string <span class="arrow">&#45;&gt;</span></span>
<span>?outgoing_encoding:string <span class="arrow">&#45;&gt;</span></span> <span><a href="../../lwt/Lwt_unix/index.html#type-file_descr">Lwt_unix.file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../lwt/Lwt_io/index.html#type-input_channel">Lwt_io.input_channel</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../lwt/Lwt_unix/index.html#type-file_descr">Lwt_unix.file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../lwt/Lwt_io/index.html#type-output_channel">Lwt_io.output_channel</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>create ?windows ?model ?incoming_encoding ?outgoing_encoding
      input_fd input_channel outout_fd output_channel</code> creates a new terminal using <code>input_fd</code> and <code>input_channel</code> for inputs and <code>output_fd</code> and <code>output_channel</code> for outputs.</p><ul><li><code>windows</code> indicates whether the terminal is a windows console (not mintty, rxvt, ...). It defaults to <code>Sys.win32</code>.</li></ul><ul><li><code>model</code> is the type of the terminal, such as &quot;rxvt&quot; or &quot;xterm&quot;. It defaults to the contents of the &quot;TERM&quot; environment variable, or to &quot;dumb&quot; if this one is not found. It is used to determine capabilities of the terminal, such as the number of colors. This is not used if <code>windows</code> is <code>true</code>.</li></ul><ul><li><code>incoming_encoding</code> is the encoding used for incoming data. It defaults to <code>LTerm_windows.get_console_cp</code> if <code>windows</code> is <code>true</code> and <code>LTerm_unix.system_encoding</code> otherwise.</li></ul><ul><li><code>outgoing_encoding</code> is the encoding used for outgoing data. It defaults to <code>LTerm_windows.get_console_output_cp</code> if <code>windows</code> is <code>true</code> and <code>LTerm_unix.system_encoding</code> otherwise. Note that transliteration is used so printing unicode character on the terminal will never fail.</li></ul><p>If one of the two given encodings does not exist, it raises <code>No_such_encoding</code>.</p><p>Note about terminal resize: in the windows console resizes are not automatically detected. Lambda-term will only check for resize only when something happens. If you want it to poll just write somewhere in your program:</p><pre><code>Lwt_engine.on_timer 1.0 true ignore</code></pre></div></div><h6 id="informations"><a href="#informations" class="anchor"></a>Informations</h6><div class="odoc-spec"><div class="spec value" id="val-model" class="anchored"><a href="#val-model" class="anchor"></a><code><span><span class="keyword">val</span> model : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Returns the model of the terminal.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-colors" class="anchored"><a href="#val-colors" class="anchor"></a><code><span><span class="keyword">val</span> colors : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Number of colors of the terminal.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-windows" class="anchored"><a href="#val-windows" class="anchor"></a><code><span><span class="keyword">val</span> windows : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Whether the terminal is a windows console or not.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-is_a_tty" class="anchored"><a href="#val-is_a_tty" class="anchor"></a><code><span><span class="keyword">val</span> is_a_tty : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>is_a_tty term</code> whether the intput and output of the given terminal are connected to a tty device.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-incoming_is_a_tty" class="anchored"><a href="#val-incoming_is_a_tty" class="anchor"></a><code><span><span class="keyword">val</span> incoming_is_a_tty : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>incoming_is_a_tty term</code> whether the input of <code>term</code> is a tty device.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-outgoing_is_a_tty" class="anchored"><a href="#val-outgoing_is_a_tty" class="anchor"></a><code><span><span class="keyword">val</span> outgoing_is_a_tty : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>incoming_is_a_tty term</code> whether the output of <code>term</code> is a tty device.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-escape_time" class="anchored"><a href="#val-escape_time" class="anchor"></a><code><span><span class="keyword">val</span> escape_time : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> float</span></code></div><div class="spec-doc"><p>Time waited before returning the escape key. This is not used on windows.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-set_escape_time" class="anchored"><a href="#val-set_escape_time" class="anchor"></a><code><span><span class="keyword">val</span> set_escape_time : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Set the time waited before returning the escape key.</p></div></div><div class="odoc-spec"><div class="spec exception" id="exception-Not_a_tty" class="anchored"><a href="#exception-Not_a_tty" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Not_a_tty</span></span></code></div><div class="spec-doc"><p>Exception raised when trying to use a function that can only be used on terminals.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-size" class="anchored"><a href="#val-size" class="anchor"></a><code><span><span class="keyword">val</span> size : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../LTerm_geom/index.html#type-size">LTerm_geom.size</a></span></code></div><div class="spec-doc"><p>Returns the curent size of the terminal.</p><p>It raises <a href="#exception-Not_a_tty"><code>Not_a_tty</code></a> if the output of the given terminal is not a tty.</p></div></div><h6 id="modes"><a href="#modes" class="anchor"></a>Modes</h6><div class="odoc-spec"><div class="spec type" id="type-mode" class="anchored"><a href="#type-mode" class="anchor"></a><code><span><span class="keyword">type</span> mode</span></code></div><div class="spec-doc"><p>Type of terminal modes.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-enter_raw_mode" class="anchored"><a href="#val-enter_raw_mode" class="anchor"></a><code><span><span class="keyword">val</span> enter_raw_mode : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-mode">mode</a> <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>enter_raw_mode term</code> puts the terminal in ``raw mode''. In this mode keyboard events are returned as they happen. In normal mode only complete line are returned. It returns the current terminal mode that can be restored using <a href="#val-leave_raw_mode"><code>leave_raw_mode</code></a>.</p><p>It raises <a href="#exception-Not_a_tty"><code>Not_a_tty</code></a> if the input of the given terminal is not tty.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-leave_raw_mode" class="anchored"><a href="#val-leave_raw_mode" class="anchor"></a><code><span><span class="keyword">val</span> leave_raw_mode : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-mode">mode</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>leave_raw_mode term mode</code> leaves the raw mode by restoring the given mode.</p><p>It raises <a href="#exception-Not_a_tty"><code>Not_a_tty</code></a> if the input of the given terminal is not tty.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-enable_mouse" class="anchored"><a href="#val-enable_mouse" class="anchor"></a><code><span><span class="keyword">val</span> enable_mouse : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div><div class="spec-doc"><p>Enable mouse events reporting.</p><p>It raises <a href="#exception-Not_a_tty"><code>Not_a_tty</code></a> if the output of the given terminal is not a tty.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-disable_mouse" class="anchored"><a href="#val-disable_mouse" class="anchor"></a><code><span><span class="keyword">val</span> disable_mouse : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div><div class="spec-doc"><p>Disable mouse events reporting.</p><p>It raises <a href="#exception-Not_a_tty"><code>Not_a_tty</code></a> if the output of the given terminal is not a tty.</p></div></div><h6 id="cursor"><a href="#cursor" class="anchor"></a>Cursor</h6><div class="odoc-spec"><div class="spec value" id="val-show_cursor" class="anchored"><a href="#val-show_cursor" class="anchor"></a><code><span><span class="keyword">val</span> show_cursor : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div><div class="spec-doc"><p>Make the cursor visible.</p><p>It raises <a href="#exception-Not_a_tty"><code>Not_a_tty</code></a> if the output of the given terminal is not a tty.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-hide_cursor" class="anchored"><a href="#val-hide_cursor" class="anchor"></a><code><span><span class="keyword">val</span> hide_cursor : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div><div class="spec-doc"><p>Make the cursor invisible.</p><p>It raises <a href="#exception-Not_a_tty"><code>Not_a_tty</code></a> if the output of the given terminal is not a tty.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-goto" class="anchored"><a href="#val-goto" class="anchor"></a><code><span><span class="keyword">val</span> goto : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../LTerm_geom/index.html#type-coord">LTerm_geom.coord</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>goto term coord</code> moves the cursor to the given coordinates.</p><p>It raises <a href="#exception-Not_a_tty"><code>Not_a_tty</code></a> if the output of the given terminal is not a tty.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-move" class="anchored"><a href="#val-move" class="anchor"></a><code><span><span class="keyword">val</span> move : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>move term rows columns</code> moves the cursor by the given number of lines and columns. Both <code>rows</code> and <code>columns</code> may be negavite.</p><p>It raises <a href="#exception-Not_a_tty"><code>Not_a_tty</code></a> if the output of the given terminal is not a tty.</p></div></div><h6 id="erasing-text"><a href="#erasing-text" class="anchor"></a>Erasing text</h6><div class="odoc-spec"><div class="spec value" id="val-clear_screen" class="anchored"><a href="#val-clear_screen" class="anchor"></a><code><span><span class="keyword">val</span> clear_screen : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>clear_screen term</code> clears the entire screen.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-clear_screen_next" class="anchored"><a href="#val-clear_screen_next" class="anchor"></a><code><span><span class="keyword">val</span> clear_screen_next : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>clear_screen_next term</code> clears the screen from the cursor to the bottom of the screen.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-clear_screen_prev" class="anchored"><a href="#val-clear_screen_prev" class="anchor"></a><code><span><span class="keyword">val</span> clear_screen_prev : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>clear_screen_prev term</code> clears the screen from the cursor to the top of the screen.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-clear_line" class="anchored"><a href="#val-clear_line" class="anchor"></a><code><span><span class="keyword">val</span> clear_line : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>clear_line term</code> erases the current line.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-clear_line_next" class="anchored"><a href="#val-clear_line_next" class="anchor"></a><code><span><span class="keyword">val</span> clear_line_next : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>clear_line_next term</code> erases the current line from the cursor to the end of the line.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-clear_line_prev" class="anchored"><a href="#val-clear_line_prev" class="anchor"></a><code><span><span class="keyword">val</span> clear_line_prev : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>clear_line_prev term</code> erases the current line from the cursor to the beginning of the line.</p></div></div><h6 id="state"><a href="#state" class="anchor"></a>State</h6><div class="odoc-spec"><div class="spec value" id="val-save_state" class="anchored"><a href="#val-save_state" class="anchor"></a><code><span><span class="keyword">val</span> save_state : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div><div class="spec-doc"><p>Save the current state of the terminal so it can be restored latter.</p><p>It raises <a href="#exception-Not_a_tty"><code>Not_a_tty</code></a> if the output of the given terminal is not a tty.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-load_state" class="anchored"><a href="#val-load_state" class="anchor"></a><code><span><span class="keyword">val</span> load_state : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div><div class="spec-doc"><p>Load the previously saved state of the terminal.</p><p>It raises <a href="#exception-Not_a_tty"><code>Not_a_tty</code></a> if the output of the given terminal is not a tty.</p></div></div><h6 id="events"><a href="#events" class="anchor"></a>Events</h6><div class="odoc-spec"><div class="spec value" id="val-read_event" class="anchored"><a href="#val-read_event" class="anchor"></a><code><span><span class="keyword">val</span> read_event : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../LTerm_event/index.html#type-t">LTerm_event.t</a> <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div><div class="spec-doc"><p>Reads and returns one event. The terminal should be in raw mode before calling this function, otherwise event will not be reported as they happen. It does not fail if the terminal is not a tty.</p><p>Note: you must not call <a href="#val-read_event"><code>read_event</code></a> from multiple thread at the same time, it will raise <code>Failure</code> if you try to do so.</p></div></div><h6 id="printing"><a href="#printing" class="anchor"></a>Printing</h6><p>All these functions accept only valid UTF-8 strings (or unicode styled text). Strings are recoded on the fly using the terminal output encoding (except if the terminal output encoding is already UTF-8, in which case the string is just printed as-it).</p><p>The general name of a printing function is <code>&lt;prefix&gt;print&lt;suffixes&gt;</code>.</p><p>Where <code>&lt;prefix&gt;</code> is one of:</p><ul><li><code>'f'</code>, which means that the function takes as argument a terminal</li><li>nothing, which means that the function prints on <a href="#val-stdout"><code>stdout</code></a></li><li><code>'e'</code>, which means that the function prints on <a href="#val-stderr"><code>stderr</code></a></li></ul><p>and <code>&lt;suffixes&gt;</code> is a combination of:</p><ul><li><code>'l'</code> which means that a new-line character is printed after the message</li><li><code>'f'</code> which means that the function takes as argument a <b>format</b> instead of a string</li><li><code>'s'</code> which means that the function takes as argument a styled string instead of a string</li></ul><p>Note that if the terminal is not a tty, styles are stripped.</p><div class="odoc-spec"><div class="spec value" id="val-fprint" class="anchored"><a href="#val-fprint" class="anchor"></a><code><span><span class="keyword">val</span> fprint : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../zed/Zed_utf8/index.html#type-t">Zed_utf8.t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-fprintl" class="anchored"><a href="#val-fprintl" class="anchor"></a><code><span><span class="keyword">val</span> fprintl : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../zed/Zed_utf8/index.html#type-t">Zed_utf8.t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-fprintf" class="anchored"><a href="#val-fprintf" class="anchor"></a><code><span><span class="keyword">val</span> fprintf : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>, unit, <a href="../../zed/Zed_utf8/index.html#type-t">Zed_utf8.t</a>, <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span>)</span> <a href="../../ocaml/Stdlib/index.html#type-format4">format4</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-fprints" class="anchored"><a href="#val-fprints" class="anchor"></a><code><span><span class="keyword">val</span> fprints : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../LTerm_text/index.html#type-t">LTerm_text.t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-fprintlf" class="anchored"><a href="#val-fprintlf" class="anchor"></a><code><span><span class="keyword">val</span> fprintlf : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>, unit, <a href="../../zed/Zed_utf8/index.html#type-t">Zed_utf8.t</a>, <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span>)</span> <a href="../../ocaml/Stdlib/index.html#type-format4">format4</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-fprintls" class="anchored"><a href="#val-fprintls" class="anchor"></a><code><span><span class="keyword">val</span> fprintls : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../LTerm_text/index.html#type-t">LTerm_text.t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-print" class="anchored"><a href="#val-print" class="anchor"></a><code><span><span class="keyword">val</span> print : <span><a href="../../zed/Zed_utf8/index.html#type-t">Zed_utf8.t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-printl" class="anchored"><a href="#val-printl" class="anchor"></a><code><span><span class="keyword">val</span> printl : <span><a href="../../zed/Zed_utf8/index.html#type-t">Zed_utf8.t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-printf" class="anchored"><a href="#val-printf" class="anchor"></a><code><span><span class="keyword">val</span> printf : <span><span><span>(<span class="type-var">'a</span>, unit, <a href="../../zed/Zed_utf8/index.html#type-t">Zed_utf8.t</a>, <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span>)</span> <a href="../../ocaml/Stdlib/index.html#type-format4">format4</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-prints" class="anchored"><a href="#val-prints" class="anchor"></a><code><span><span class="keyword">val</span> prints : <span><a href="../LTerm_text/index.html#type-t">LTerm_text.t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-printlf" class="anchored"><a href="#val-printlf" class="anchor"></a><code><span><span class="keyword">val</span> printlf : <span><span><span>(<span class="type-var">'a</span>, unit, <a href="../../zed/Zed_utf8/index.html#type-t">Zed_utf8.t</a>, <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span>)</span> <a href="../../ocaml/Stdlib/index.html#type-format4">format4</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-printls" class="anchored"><a href="#val-printls" class="anchor"></a><code><span><span class="keyword">val</span> printls : <span><a href="../LTerm_text/index.html#type-t">LTerm_text.t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-eprint" class="anchored"><a href="#val-eprint" class="anchor"></a><code><span><span class="keyword">val</span> eprint : <span><a href="../../zed/Zed_utf8/index.html#type-t">Zed_utf8.t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-eprintl" class="anchored"><a href="#val-eprintl" class="anchor"></a><code><span><span class="keyword">val</span> eprintl : <span><a href="../../zed/Zed_utf8/index.html#type-t">Zed_utf8.t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-eprintf" class="anchored"><a href="#val-eprintf" class="anchor"></a><code><span><span class="keyword">val</span> eprintf : <span><span><span>(<span class="type-var">'a</span>, unit, <a href="../../zed/Zed_utf8/index.html#type-t">Zed_utf8.t</a>, <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span>)</span> <a href="../../ocaml/Stdlib/index.html#type-format4">format4</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-eprints" class="anchored"><a href="#val-eprints" class="anchor"></a><code><span><span class="keyword">val</span> eprints : <span><a href="../LTerm_text/index.html#type-t">LTerm_text.t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-eprintlf" class="anchored"><a href="#val-eprintlf" class="anchor"></a><code><span><span class="keyword">val</span> eprintlf : <span><span><span>(<span class="type-var">'a</span>, unit, <a href="../../zed/Zed_utf8/index.html#type-t">Zed_utf8.t</a>, <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span>)</span> <a href="../../ocaml/Stdlib/index.html#type-format4">format4</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-eprintls" class="anchored"><a href="#val-eprintls" class="anchor"></a><code><span><span class="keyword">val</span> eprintls : <span><a href="../LTerm_text/index.html#type-t">LTerm_text.t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div></div><h6 id="printing-contexts"><a href="#printing-contexts" class="anchor"></a>Printing contexts</h6><p>You shoud use these functions when you to print a lot of styled text that does not entirely fit in a single <a href="../LTerm_text/index.html#type-t"><code>LTerm_text.t</code></a> value.</p><p>This is more efficient than calling manually <a href="#val-set_style"><code>set_style</code></a> since styles will be modified only when needed.</p><div class="odoc-spec"><div class="spec type" id="type-context" class="anchored"><a href="#type-context" class="anchor"></a><code><span><span class="keyword">type</span> context</span></code></div><div class="spec-doc"><p>A context for styled printing.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-with_context" class="anchored"><a href="#val-with_context" class="anchor"></a><code><span><span class="keyword">val</span> with_context : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><a href="#type-context">context</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>with_context term f</code> creates a new printing context and pass it to <code>f</code>. Note that calls to <code>with_context</code> are serialized.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-update_style" class="anchored"><a href="#val-update_style" class="anchor"></a><code><span><span class="keyword">val</span> update_style : <span><a href="#type-context">context</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../LTerm_style/index.html#type-t">LTerm_style.t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>update_style ctx style</code> updates the style of the context with <code>style</code>. If needed styles of the terminal are modified.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-context_term" class="anchored"><a href="#val-context_term" class="anchor"></a><code><span><span class="keyword">val</span> context_term : <span><a href="#type-context">context</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Returns the terminal used by the given context.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-context_oc" class="anchored"><a href="#val-context_oc" class="anchor"></a><code><span><span class="keyword">val</span> context_oc : <span><a href="#type-context">context</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../lwt/Lwt_io/index.html#type-output_channel">Lwt_io.output_channel</a></span></code></div><div class="spec-doc"><p>Returns the output channel used by the given context. Note that this channel cannot be used after <a href="#val-with_context"><code>with_context</code></a> has terminated.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-encode_string" class="anchored"><a href="#val-encode_string" class="anchor"></a><code><span><span class="keyword">val</span> encode_string : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../zed/Zed_utf8/index.html#type-t">Zed_utf8.t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>encode_string term str</code> encodes an UTF-8 string using the terminal encoding.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-encode_char" class="anchored"><a href="#val-encode_char" class="anchor"></a><code><span><span class="keyword">val</span> encode_char : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../camomile/CamomileLibrary/UChar/index.html#type-t">CamomileLibrary.UChar.t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>encode_char term ch</code> encodes an unicode character using the terminal encoding.</p></div></div><h6 id="styles"><a href="#styles" class="anchor"></a>Styles</h6><div class="odoc-spec"><div class="spec value" id="val-set_style" class="anchored"><a href="#val-set_style" class="anchor"></a><code><span><span class="keyword">val</span> set_style : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../LTerm_style/index.html#type-t">LTerm_style.t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div><div class="spec-doc"><p>Change the style of the termina for subsequent unstyled output. It does nothing if the output is not a tty.</p></div></div><h6 id="rendering"><a href="#rendering" class="anchor"></a>Rendering</h6><div class="odoc-spec"><div class="spec value" id="val-render" class="anchored"><a href="#val-render" class="anchor"></a><code><span><span class="keyword">val</span> render : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../LTerm_draw/index.html#type-matrix">LTerm_draw.matrix</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div><div class="spec-doc"><p>Render an offscreen array to the given terminal.</p><p>It raises <a href="#exception-Not_a_tty"><code>Not_a_tty</code></a> if the output of the given terminal is not a tty.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-render_update" class="anchored"><a href="#val-render_update" class="anchor"></a><code><span><span class="keyword">val</span> render_update : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../LTerm_draw/index.html#type-matrix">LTerm_draw.matrix</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../LTerm_draw/index.html#type-matrix">LTerm_draw.matrix</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>render_update displayed to_display</code> does the same as <code>render
      to_display</code> but assumes that <code>displayed</code> contains the current displayed text. This reduces the amount of text sent to the terminal.</p><p>It raises <a href="#exception-Not_a_tty"><code>Not_a_tty</code></a> if the output of the given terminal is not a tty.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-print_box" class="anchored"><a href="#val-print_box" class="anchor"></a><code><span><span class="keyword">val</span> print_box : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../LTerm_draw/index.html#type-matrix">LTerm_draw.matrix</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>print_box term matrix</code> prints the contents of <code>matrix</code> starting at current cursor row. Note that when you have the choice between using <a href="#val-fprints"><code>fprints</code></a> and <a href="#val-print_box"><code>print_box</code></a> you should use <a href="#val-print_box"><code>print_box</code></a> because it works better under windows and is more efficient.</p><p>The cursor is moved to the beginning of the last displayed line.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-print_box_with_newlines" class="anchored"><a href="#val-print_box_with_newlines" class="anchor"></a><code><span><span class="keyword">val</span> print_box_with_newlines : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../LTerm_draw/index.html#type-matrix">LTerm_draw.matrix</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>print_box term matrix</code> Same as <a href="#val-print_box"><code>print_box</code></a> but <code>matrix</code> may contains newline characters. It must contain one more column that the terminal (in case a line of the length of the terminal ends with a newline).</p><p>The difference between <a href="#val-print_box"><code>print_box</code></a> and <a href="#val-print_box_with_newlines"><code>print_box_with_newlines</code></a> is that when the text is selected in the terminal, with <a href="#val-print_box"><code>print_box</code></a> it will always be a box with the dimensions of <code>matrix</code>. With <a href="#val-print_box_with_newlines"><code>print_box_with_newlines</code></a> it may contains lines longer than the width of the terminal.</p><p>The contents of a line after the first newline character (if any) in a row of <code>matrix</code> is ignored. The rest of the line get the style of the newline character.</p></div></div><h6 id="misc"><a href="#misc" class="anchor"></a>Misc</h6><div class="odoc-spec"><div class="spec value" id="val-flush" class="anchored"><a href="#val-flush" class="anchor"></a><code><span><span class="keyword">val</span> flush : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div><div class="spec-doc"><p>Flushes the underlying output channel used by the terminal.</p></div></div><h6 id="well-known-instances"><a href="#well-known-instances" class="anchor"></a>Well known instances</h6><div class="odoc-spec"><div class="spec value" id="val-stdout" class="anchored"><a href="#val-stdout" class="anchor"></a><code><span><span class="keyword">val</span> stdout : <span><span><a href="#type-t">t</a> <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span> <a href="../../ocaml/Stdlib/Lazy/index.html#type-t">Lazy.t</a></span></span></code></div><div class="spec-doc"><p>Terminal using <a href="../../lwt/Lwt_unix/index.html#val-stdin"><code>Lwt_unix.stdin</code></a> as input and <a href="../../lwt/Lwt_unix/index.html#val-stdout"><code>Lwt_unix.stdout</code></a> as output.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-stderr" class="anchored"><a href="#val-stderr" class="anchor"></a><code><span><span class="keyword">val</span> stderr : <span><span><a href="#type-t">t</a> <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span> <a href="../../ocaml/Stdlib/Lazy/index.html#type-t">Lazy.t</a></span></span></code></div><div class="spec-doc"><p>Terminal using <a href="../../lwt/Lwt_unix/index.html#val-stdin"><code>Lwt_unix.stdin</code></a> as input and <a href="../../lwt/Lwt_unix/index.html#val-stderr"><code>Lwt_unix.stderr</code></a> as output.</p></div></div><h6 id="low-level-functions"><a href="#low-level-functions" class="anchor"></a>Low-level functions</h6><div class="odoc-spec"><div class="spec value" id="val-get_size_from_fd" class="anchored"><a href="#val-get_size_from_fd" class="anchor"></a><code><span><span class="keyword">val</span> get_size_from_fd : <span><a href="../../lwt/Lwt_unix/index.html#type-file_descr">Lwt_unix.file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../LTerm_geom/index.html#type-size">LTerm_geom.size</a> <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>get_size_from_fd fd</code> returns the size of the terminal accessible via the given file descriptor.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-set_size_from_fd" class="anchored"><a href="#val-set_size_from_fd" class="anchor"></a><code><span><span class="keyword">val</span> set_size_from_fd : <span><a href="../../lwt/Lwt_unix/index.html#type-file_descr">Lwt_unix.file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../LTerm_geom/index.html#type-size">LTerm_geom.size</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>set_size_from_fd fd size</code> tries to set the size of the terminal accessible via the given file descriptor.</p></div></div><h6 id="modification"><a href="#modification" class="anchor"></a>Modification</h6><div class="odoc-spec"><div class="spec value" id="val-set_io" class="anchored"><a href="#val-set_io" class="anchor"></a><code><span><span class="keyword">val</span> set_io : <span>?incoming_fd:<a href="../../lwt/Lwt_unix/index.html#type-file_descr">Lwt_unix.file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span>?incoming_channel:<a href="../../lwt/Lwt_io/index.html#type-input_channel">Lwt_io.input_channel</a> <span class="arrow">&#45;&gt;</span></span> <span>?outgoing_fd:<a href="../../lwt/Lwt_unix/index.html#type-file_descr">Lwt_unix.file_descr</a> <span class="arrow">&#45;&gt;</span></span>
<span>?outgoing_channel:<a href="../../lwt/Lwt_io/index.html#type-output_channel">Lwt_io.output_channel</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div><div class="spec-doc"><p>Modifies file descriptors/channels of a terminal. Unspecified arguments are kept unchanged.</p><p>Note: before modifying a terminal you should ensure that no operation is pending on it.</p></div></div></div></body></html>