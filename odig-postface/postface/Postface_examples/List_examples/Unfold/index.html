<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Unfold (postface.Postface_examples.List_examples.Unfold)</title><link rel="stylesheet" href="../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">postface</a> &#x00BB; <a href="../../index.html">Postface_examples</a> &#x00BB; <a href="../index.html">List_examples</a> &#x00BB; Unfold</nav><header class="odoc-preamble"><h1>Module <code><span>List_examples.Unfold</span></code></h1><p>Examples for <a href="../../../Postface/List/index.html#val-unfold"><code>Postface.List.unfold</code></a></p><p><code>unfold</code> is a kind of list generator. It is given a starting value and a function is applied to it. If this function returns a pair option <code>Some (x, new_start)</code>, we add <code>x</code> to the list and reapply the function on <code>new_start</code>. If the function returns <code>None</code>, the list is returned.</p><p>For example, we could write <code>init</code> in terms of <code>unfold</code> using this generation function. As long as our index is smaller than the desired size, we return the pair of our function application on the index and increment the index. Once we have reached our bound, we can end the computation by returning <code>None</code>:</p><pre><code># let continue l f i = if i &gt;= l then None else Some (f i, i + 1) ;;
val continue : int -&gt; (int -&gt; 'a) -&gt; int -&gt; ('a * int) option = &lt;fun&gt;</code></pre><p>And we can implement <code>init</code> by starting from <code>0</code> and applying our <code>continue</code> function at each iteration:</p><pre><code># let init_with_unfold l f = List.unfold ~start:0 (continue l f) ;;
val init_with_unfold : int -&gt; (int -&gt; 'a) -&gt; 'a list = &lt;fun&gt;</code></pre><p>This gives us the same behaviour as <code>init</code>:</p><pre><code># init_with_unfold 10 (fun x -&gt; x) ;;
- : int list = [0; 1; 2; 3; 4; 5; 6; 7; 8; 9]</code></pre><p>This includes cases where the requested size is less than or equal to <code>0</code>:</p><pre><code># init_with_unfold (-12) (fun x -&gt; x) ;;
- : int list = []</code></pre></header><div class="odoc-content"></div></body></html>